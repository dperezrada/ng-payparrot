/**
 * Payparrot angular modules
 * @version v0.0.1 - 2013-11-04
 * @link 
 * @author Daniel Pérez <dperezrada@gmail.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(a){"use strict";a.module("ngPayparrot",["ng","ui.bootstrap"]);var b={};a.module("ngPayparrot").constant("Utils",b),a.module("ngPayparrot").directive("popchart",function(){return{template:'<div class="popover_container"><button popover-placement="right" popover="loading..." class="btn" popover-title="Visitantes últimos 3 meses">chart</button></div>',restrict:"E",scope:{showEventAttrs:"=",showEvent:"=",ngModel:"="},link:function(a,b){var c=null,d={grid:{hoverable:!0,clickable:!0,tickColor:"#f9f9f9",borderWidth:0},legend:{labelBoxBorderColor:"#fff"},yaxis:{min:0},points:{show:!0,lineWidth:2,radius:5},lines:{show:!0,lineWidth:3},xaxis:{mode:"time",tickDecimals:0}},e=function(){if(a.ngModel&&0!==a.ngModel.length){var e=$(".popover-content",b);0!==e.length&&(c?(c.setData(a.ngModel),c.setupGrid(),c.draw()):(e.html(""),c=$.plot(e,a.ngModel,d),e.show()))}};a.$watch("ngModel",function(){e()},!0),$(b).click(function(){a.show=!a.show,a.show&&(console.log(a.showEventAttrs[0]),a.showEvent.apply(this,a.showEventAttrs),$(".popover",b).css({"max-width":"none",height:"250px",top:"88px"}),$(".popover-content",b).css({width:"450px",height:"220px"}),e())})}}})}(angular);